# Query Generation Example for the Comon User Profile

### Initial Query Generation Request

This initial request creates an open query that reurns all the data given to it. This query is meant to be sent to the parse endpoint of the api and is not intended to be run in a program. 

Make a request to the /query endpoint of the api with the body shown in ExampleQueryRequestBody.json in the examples folder. Make sure the Content-Type header is set to application/json. Once the you send the request in your program you should recieve a JSON response like the one shown below. 

#### Example Response 1

```json
{
"query": "select distinct ?PersonProperNameGivenName ?PersonProperNameFamilyName ?PersonActOfResidingResidentialFacilityStreetAddress ?PersonActOfResidingResidentialFacilityLocalAdministrativeRegionDesignativeName ?PersonActOfResidingResidentialFacilityLocalAdministrativeRegionCountyDesignativeName ?PersonActOfResidingResidentialFacilityLocalAdministrativeRegionCountyStateDesignativeName ?PersonActOfResidingResidentialFacilityGeospatialRegionGeospatialRegionIdentifierLongitude ?PersonActOfResidingResidentialFacilityGeospatialRegionGeospatialRegionIdentifierLatitude ?PersonActOfResidingResidentialFacilityPostalZonePostalCode  where{?Personvar0 a <http://www.ontologyrepository.com/CommonCoreOntologies/Person>.?Personvar0 <http://www.ontologyrepository.com/CommonCoreOntologies/designated_by> ?Personvar1.?Personvar1 a <http://www.ontologyrepository.com/CommonCoreOntologies/ProperName>.?Personvar1 <http://purl.obolibrary.org/obo/BFO_0000051> ?Personvar2.?Personvar2 a <http://www.ontologyrepository.com/CommonCoreOntologies/GivenName>.?Personvar2 <http://purl.obolibrary.org/obo/RO_0010001> ?Personvar3.?Personvar3 a <http://www.ontologyrepository.com/CommonCoreOntologies/InformationBearingEntity>.?Personvar3 <http://www.ontologyrepository.com/CommonCoreOntologies/has_text_value> ?PersonProperNameGivenName.?Personvar1 <http://purl.obolibrary.org/obo/BFO_0000051> ?Personvar5.?Personvar5 a <http://www.ontologyrepository.com/CommonCoreOntologies/FamilyName>.?Personvar5 <http://purl.obolibrary.org/obo/RO_0010001> ?Personvar6.?Personvar6 a <http://www.ontologyrepository.com/CommonCoreOntologies/InformationBearingEntity>.?Personvar6 <http://www.ontologyrepository.com/CommonCoreOntologies/has_text_value> ?PersonProperNameFamilyName.?Personvar0 <http://www.ontologyrepository.com/CommonCoreOntologies/agent_in> ?Personvar8.?Personvar8 a <http://www.ontologyrepository.com/CommonCoreOntologies/ActOfResiding>.?Personvar8 <http://www.ontologyrepository.com/CommonCoreOntologies/has_object> ?Personvar9.?Personvar9 a <http://www.ontologyrepository.com/CommonCoreOntologies/ResidentialFacility>.?Personvar9 <http://www.ontologyrepository.com/CommonCoreOntologies/designated_by> ?Personvar10.?Personvar10 a <http://www.ontologyrepository.com/CommonCoreOntologies/StreetAddress>.?Personvar10 <http://purl.obolibrary.org/obo/RO_0010001> ?Personvar11.?Personvar11 a <http://www.ontologyrepository.com/CommonCoreOntologies/InformationBearingEntity>.?Personvar11 <http://www.ontologyrepository.com/CommonCoreOntologies/has_text_value> ?PersonActOfResidingResidentialFacilityStreetAddress.?Personvar9 <http://purl.obolibrary.org/obo/RO_0001025> ?Personvar13.?Personvar13 a <http://www.ontologyrepository.com/CommonCoreOntologies/LocalAdministrativeRegion>.?Personvar13 <http://www.ontologyrepository.com/CommonCoreOntologies/designated_by> ?Personvar14.?Personvar14 a <http://www.ontologyrepository.com/CommonCoreOntologies/DesignativeName>.?Personvar14 <http://purl.obolibrary.org/obo/RO_0010001> ?Personvar15.?Personvar15 a <http://www.ontologyrepository.com/CommonCoreOntologies/InformationBearingEntity>.?Personvar15 <http://www.ontologyrepository.com/CommonCoreOntologies/has_text_value> ?PersonActOfResidingResidentialFacilityLocalAdministrativeRegionDesignativeName.?Personvar13 <http://purl.obolibrary.org/obo/BFO_0000050> ?Personvar17.?Personvar17 a <http://www.ontologyrepository.com/CommonCoreOntologies/County>.?Personvar17 <http://www.ontologyrepository.com/CommonCoreOntologies/designated_by> ?Personvar18.?Personvar18 a <http://www.ontologyrepository.com/CommonCoreOntologies/DesignativeName>.?Personvar18 <http://purl.obolibrary.org/obo/RO_0010001> ?Personvar19.?Personvar19 a <http://www.ontologyrepository.com/CommonCoreOntologies/InformationBearingEntity>.?Personvar19 <http://www.ontologyrepository.com/CommonCoreOntologies/has_text_value> ?PersonActOfResidingResidentialFacilityLocalAdministrativeRegionCountyDesignativeName.?Personvar17 <http://purl.obolibrary.org/obo/BFO_0000050> ?Personvar21.?Personvar21 a <http://www.ontologyrepository.com/CommonCoreOntologies/State>.?Personvar21 <http://www.ontologyrepository.com/CommonCoreOntologies/designated_by> ?Personvar22.?Personvar22 a <http://www.ontologyrepository.com/CommonCoreOntologies/DesignativeName>.?Personvar22 <http://purl.obolibrary.org/obo/RO_0010001> ?Personvar23.?Personvar23 a <http://www.ontologyrepository.com/CommonCoreOntologies/InformationBearingEntity>.?Personvar23 <http://www.ontologyrepository.com/CommonCoreOntologies/has_text_value> ?PersonActOfResidingResidentialFacilityLocalAdministrativeRegionCountyStateDesignativeName.?Personvar9 <http://purl.obolibrary.org/obo/RO_0001025> ?Personvar25.?Personvar25 a <http://www.ontologyrepository.com/CommonCoreOntologies/GeospatialRegion>.?Personvar25 <http://www.ontologyrepository.com/CommonCoreOntologies/designated_by> ?Personvar26.?Personvar26 a <http://www.ontologyrepository.com/CommonCoreOntologies/GeospatialRegionIdentifier>.?Personvar26 <http://purl.obolibrary.org/obo/RO_0010001> ?Personvar27.?Personvar27 a <http://www.ontologyrepository.com/CommonCoreOntologies/InformationBearingEntity>.?Personvar27 <http://www.ontologyrepository.com/CommonCoreOntologies/has_longitude_value> ?PersonActOfResidingResidentialFacilityGeospatialRegionGeospatialRegionIdentifierLongitude.?Personvar27 <http://www.ontologyrepository.com/CommonCoreOntologies/has_latitude_value> ?PersonActOfResidingResidentialFacilityGeospatialRegionGeospatialRegionIdentifierLatitude.?Personvar9 <http://purl.obolibrary.org/obo/RO_0001025> ?Personvar30.?Personvar30 a <http://www.ontologyrepository.com/CommonCoreOntologies/PostalZone>.?Personvar30 <http://www.ontologyrepository.com/CommonCoreOntologies/designated_by> ?Personvar31.?Personvar31 a <http://www.ontologyrepository.com/CommonCoreOntologies/PostalCode>.?Personvar31 <http://purl.obolibrary.org/obo/RO_0010001> ?Personvar32.?Personvar32 a <http://www.ontologyrepository.com/CommonCoreOntologies/InformationBearingEntity>.?Personvar32 <http://www.ontologyrepository.com/CommonCoreOntologies/has_integer_value> ?PersonActOfResidingResidentialFacilityPostalZonePostalCode.}"
}

```

After the initial query request you can now use the response to create a more specific query that returns the data you want. In the body of the second request, you want to include a JOSN object with the query, the variables you want to return, how many values you want to return, how you want to order , the constants you want to bind to specific values, and the variables you want to integrtate with each other. The file ExampleParseRequest.json gives an example of what a normal body would look like. If you send a request with the example body to the api's /parse endpoint, you should get a responese that looks like the one below. This query can be ran against a dataset and will return the specified variables with the parameters specified in the body. 

#### Example Response 2

```json
{"query":"select distinct ?PersonProperNameGivenName ?PersonProperNameFamilyName where { Bind( 'JOHN' as ?PersonProperNameGivenName)Bind( 'DOE' as ?PersonProperNameFamilyName)?Personvar0 <http://www.ontologyrepository.com/CommonCoreOntologies/designated_by> ?Personvar1.?Personvar1 a <http://www.ontologyrepository.com/CommonCoreOntologies/ProperName>.?Personvar1 <http://purl.obolibrary.org/obo/BFO_0000051> ?Personvar2.?Personvar2 a <http://www.ontologyrepository.com/CommonCoreOntologies/GivenName>.?Personvar2 <http://purl.obolibrary.org/obo/RO_0010001> ?Personvar3.?Personvar3 a <http://www.ontologyrepository.com/CommonCoreOntologies/InformationBearingEntity>.?Personvar3 <http://www.ontologyrepository.com/CommonCoreOntologies/has_text_value> ?PersonProperNameGivenName.?Personvar0 a <http://www.ontologyrepository.com/CommonCoreOntologies/Person>.?Personvar0 <http://www.ontologyrepository.com/CommonCoreOntologies/designated_by> ?Personvar1.?Personvar1 a <http://www.ontologyrepository.com/CommonCoreOntologies/ProperName>.?Personvar1 a <http://www.ontologyrepository.com/CommonCoreOntologies/ProperName>.?Personvar1 <http://purl.obolibrary.org/obo/BFO_0000051> ?Personvar5.?Personvar5 a <http://www.ontologyrepository.com/CommonCoreOntologies/FamilyName>.?Personvar5 <http://purl.obolibrary.org/obo/RO_0010001> ?Personvar6.?Personvar6 a <http://www.ontologyrepository.com/CommonCoreOntologies/InformationBearingEntity>.?Personvar6 <http://www.ontologyrepository.com/CommonCoreOntologies/has_text_value> ?PersonProperNameFamilyName.}limit 20"}
```

